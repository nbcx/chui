# 响应
配置在后面要讲的很多模块里都有用到，所以提前来讲解一下NB的配置相关。主要讲解怎么编写配置和读取配置，至于每一项配置要怎么设值，会在讲到对应模块的时候说明。

NB的配置分为框架配置和业务配置两种：

- 框架配置
框架配置主要是设置框架运行的相关参数，如开启调试模式，注册命名空间，模块等。
    
- 业务配置
业务配置不是必须的，她是设置业务开发中用到的一些参数，如第三方的密钥等信息。
    
    
## 编写配置

### 编写框架配置
框架配置必须继承自nb\Config,通过重写nb\Config的类属性，来改变或添加默认配置。
框架配置的位置没有严格要求，推荐放在根目录，并命名为config.inc.php，类名Config，这样框架可以自动识别。
反之，需要向框架注册。
我们在入口文件看到有一句这样的代码：

```
\nb\Config::register();
```

这个就是注册框架配置了，如果你改变了默认读取的框架配置文件的话，比如你定义demo/application/Configure.php为框架配置：

```
namespace common;

use nb\Config;

class Configure extends Config {

    //用户相对目录
    public $usr_relative_dir      = '';
    
    ...
```


此时需要这样：

```
\nb\Config::register('common\\Config');
```

将定义的框架配置类的完整包名作为register函数的参数，此时框架加载的就是demo/application/Configure.php配置了。


### 使用框架配置
首先看一些`\nb\Config`提供的方法：

|方法  |说明  |
| --- | --- |
|register| 注册并初始化配置类对象 |
|get  | 获取业务配置的值 |
|set  | 设置业务配置的值 |
|set_merge  |通过合并来修改业务配置的值  |
|getx  | 获取框架配置的值 |
|setx  | 设置框架配置的值 |
|setx_merge  | 通过合并来修改框架配置的值 |
|load   | 加载一个配置文件 |
|import | 根据设置加载对应的文件 |



程序在运行到`\nb\Config::register()`的时候，就已经生产了一个Config的实例对象了，你可以在程序的任何地方通过下面的代码获取她，进而获取对应配置值：

```
nb\Config:$o;

nb\Config:$o->debug;//获取调试配置的设置

//也可以这样获取
nb\Config::getx('debug');//获取调试配置的设置

...
```


### 编写业务配置
业务配置文件存放的位置，默认为`application/include/`下，你可以在框架配置里通过`path_autoinclude`属性来修改，如下：

```
 //默认是这样的配置
 public $path_autoinclude    = [
    'application/include/'
 ];

//可以按照自己的需要进行修改，并且可以添加多条目录
public $path_autoinclude    = [
    'application/include/'
    'config/'
 ];
```

业务配置对文件名是有一定的要求的，通常情况下，NB会自动对目录下以`.inc.php`和`.fuc.php`后戳的文件进行include，然后在根据框架配置里的`path_autoext`来include其它的配置文件，如下面配置:

```
public $path_autoext='qa';
```

该配置会include后戳为`.qa.php`的文件。这种设置是为了方便在不同的环境使用不同的配置。

NB为了防止项目上线时忘了修改`path_autoext`造成配置错误的问题，也支持下面这种配置：

```
public $path_autoext       = [
    'demo.nb.cx'=>'demo',
    'qa.nb.cx' =>'qa',
    'nb.cx' =>'live'
];
```
这种方式是根据每次请求的host来加在不同的配置文件，如项目的域名为nb.cx的时候就会include后戳为`.live.php`的文件，而为demo.nb.cx的时候，就会include后戳为`.demo.php`的文件。其它依次类推。

现在我们在demo/application/include目录下编写一个common.inc.php的配置文件，内容如下：

```
//这里可以定义一个常量
define('BASE_PATH','/home/www/uploads');

//这是标准的定义方式
$config['hello'] = 'world';

$config['mail'] = [
    'user'=>'xxx@qq.com'
    'pass'=>'123456'
];
```
在业务配置文件里，除了常量外，标准的配置都必须赋值给'$config'数组，否则将无法读取，且索引不要有重复，否则会覆盖。

### 读取业务配置
业务配置的读取，也是通过`nb\Config`类，如下：

```
//读取mail配置
$mail = nb\Config::get('mail');

//也可以通过助手函数来读取配置
$hello = conf('hello');

```


## nb\Config属性和方法详解

### 属性

### 方法

