# 请求
当前的请求对象由nb\\Request类负责，我们通过其提供的静态方法进行相关操作即可！

## 请求信息
Request的驱动对象支持获取当前的请求信息，包括：
|方法|含义|
|:-----  |-----  |
|host        |当前访问域名或者IP|
|scheme      |当前访问协议|
|port        |当前访问的端口|
|remotePort  |当前请求的REMOTE_PORT|
|protocol    |当前请求的SERVER_PROTOCOL|
|contentType |当前请求的CONTENT_TYPE|
|domain      |当前包含协议的域名|
|subDomain   |当前访问的子域名|
|panDomain   |当前访问的泛域名|
|rootDomain  |当前访问的根域名|
|url         |当前完整URL|
|baseUrl     |当前URL（不含QUERY_STRING）|
|query       |当前请求的QUERY_STRING参数|
|baseFile    |当前执行的文件|
|root        |URL访问根地址|
|rootUrl     |URL访问根目录|
|pathinfo    |当前请求URL的pathinfo信息（含URL后缀）|
|path        |请求URL的pathinfo信息(不含URL后缀)|
|ext         |当前URL的访问后缀|
|time        |获取当前请求的时间|
|type        |当前请求的资源类型|
|method      |当前请求类型|

对于上面的这些请求方法，一般调用无需任何参数，但某些方法如果需要参数需要用静态函数调用：
```$php
//常规调用
$req = nb\Request::driver();

$req->url;// 获取完整URL地址 不带域名
$req->baseFile; // 获取当前URL（不含QUERY_STRING） 不带域名
$req->root; // 获取URL访问根地址 不带域名
$req->input; //获取`php://input`里的数据

//常参数调用
nb\Request::url(true); // 获取完整URL地址 包含域名
nb\Request::baseFile(true); // 获取当前URL（不含QUERY_STRING） 包含域名
nb\Request::root(true);// 获取URL访问根地址 包含域名
```

## 输入变量

可以通过Request对象提供的静态函数，获取包括$_GET、$_POST、$_REQUEST、$_SERVER、$_SESSION、$_COOKIE等系统变量，以及文件上传信息。

1.先看一个函数原型：
```$php
/**
 * 获取请求数据
 * @param string $method
 * @return mixed
 */
public static function form($method='request',array $args=null)
```
$method要获取的数据来源，其值可以为：
|名字|含义|
|:-----  |-----  |
|get      |从$_GET里获取数据|
|post     |从$_POST里获取数据|
|request  |从$_REQUEST里获取数据|
|server   |从$_SERVER里获取数据|
|session  |从$_SESSION里获取数据|
|cookie   |从$_COOKIE里获取数据|
|files    |从$_FILES里获取数据|
|put      |将`php://input`的值parse_str后作为数据来源|

比如我们有如下一个请求
> http://demo.ol.cx/request/get?id=1&name=张三&age=24

```$php
$get = \nb\Request::form('get');
ex($get);

//当我们在控制器里执行上面代码时，将在页面显示：
Array
(
    [id] => 1
    [name] => 张三
    [age] => 24
)

```
可以看到我们把$_GET的所有参数都获取到了
如果你只需要获取指定的参数的话，那么你可以这样获取：

```$php
$get = \nb\Request::form('get',[
    'name'
]);
ex($get);

//当我们在控制器里执行上面代码时，将在页面显示：
Array
(
    [name] => 张三
)

```
通过上面两个列子，我们很容易的推断出其它如post，files等数据的获取。

2.现在我们在来看一个函数原型：
```$php
/**
 * 获取请求数据
 *
 * @param string $method
 * @param array|null $args
 * @return mixed
 */
public static function formx($method='request',array $args=null)
```
这个静态函数和`form`的使用方式是一样的，本质是对`form`函数的一个包装。
区别在于他们的返回值，前者返回的是一个数组，后者是一个Collection对象，如下：
```$php
$get = \nb\Request::formx('get');
ex($get->name);

//当我们在控制器里执行上面代码时，将在页面显示：
张三

```

3.我们继续在看一个函数原型：
```$php
/**
 * 获取表单参数对应的值
 * 如果获取多个，则以值数组的形式返回
 *
 * @param $arg
 * @param array ...$args
 * @return array|mixed|null
 */
public static function input($arg,...$args)
```
这个静态函数也是`form`的一个包装，不过她在使用和返回值上都和`form`有所区别。
`input`的第二个参数如果是数组的话，那么第一个参数为数据获取来源值，
如果第二个参数不为数组，那么所有参数将作为要获取的指定数据，数据来源值为'request'。
`input`的返回值为一个数字索引的数组。

我们通过列子来看：
```$php
list($name,$age)= \nb\Request::input('name','age');
ex($name,$age);

//当我们在控制器里执行上面代码时，将在页面显示：
张三
24

//这段代码和上面结果是一致的
$get = \nb\Request::input('get',['name','age']);
ex($get);
//页面显示：
Array
(
    [0] => 张三
    [1] => 24
)

//注意，当只有一个指定数据参数时，返回的结果将不是数组
$get = \nb\Request::input('get',['name']);
ex($get);
$get = \nb\Request::input('name');
ex($get);
//页面显示：
张三
张三
```
> 当只有一个指定数据参数时，返回值为参数对应当值，
> 当有一个以上当指定数据参数时，返回值为所有指定数据参数对应值组成当数字索引的数组

## 其它